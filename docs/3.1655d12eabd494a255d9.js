(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{359:function(e,t,r){"use strict";r.r(t);var a=r(0),c=r.n(a),l=r(50),u=r(136),n=r(15),o=r(339),i=r.n(o);function s(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}var f,v,d={get:(f=regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(t,r);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}),v=function(){var e=this,i=arguments;return new Promise(function(t,r){var n=f.apply(e,i);function o(e){s(n,t,r,o,a,"next",e)}function a(e){s(n,t,r,o,a,"throw",e)}o(void 0)})},function(e,t){return v.apply(this,arguments)})},h=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;return d.get("".concat(n.a,"/random/").concat(e)).then(function(e){var t=e.value;return Promise.resolve(t)})},m=function(){var e=localStorage.getItem("jokes");return e&&JSON.parse(e)||[]},p=function(t){var e=m(),r=e.findIndex(function(e){return e.id===t});return{jokes:e,found:r}},y=function(e,t){return t?(c=p((i=e).id),l=c.jokes,c.found<0&&l.length<=10&&l.push(i),localStorage.setItem("jokes",JSON.stringify(l)),l):(r=e.id,n=p(r),o=n.jokes,0<=(a=n.found)&&o.splice(a,1),localStorage.setItem("jokes",JSON.stringify(o)),o);var r,n,o,a,i,c,l};function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=function(e){function o(e){var t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r=this,(t=!(n=S(o).call(this,e))||"object"!==g(n)&&"function"!=typeof n?j(r):n).state={jokes:[],favoriteJokes:[],loading:!0,loadingFavorite:!1,error:!1,errMsg:""},t.loadJokes=t.loadJokes.bind(j(t)),t.onFavoriteClick=t.onFavoriteClick.bind(j(t)),t.onSwitchToggle=t.onSwitchToggle.bind(j(t)),t.timer={},t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(o,a["Component"]),t=o,(r=[{key:"componentDidMount",value:function(){this.loadJokes(),this.setState({favoriteJokes:m()})}},{key:"onFavoriteClick",value:function(e){var t=e.item,r=e.fav,n=y(t,r);this.setState({favoriteJokes:n})}},{key:"onSwitchToggle",value:function(e){var t=this;e.target.checked?(this.setState({loadingFavorite:!0}),this.timer=setInterval(function(){return t.ticker()},5e3)):this.clearTimer()}},{key:"ticker",value:function(){var r=this;this.state.favoriteJokes.length<10?h(1).then(function(e){var t=b(e,1)[0];return r.onFavoriteClick({item:t,fav:!0})}).catch(function(e){return r.handleError(e)}):this.clearTimer()}},{key:"clearTimer",value:function(){clearInterval(this.timer),this.setState({loadingFavorite:!1})}},{key:"loadJokes",value:function(){var r=this;this.setState({loading:!0}),h().then(function(e){var t=r.state.jokes;r.setState({jokes:[].concat(k(e),k(t)),loading:!1})}).catch(function(e){return r.handleError(e)})}},{key:"handleError",value:function(e){this.setState({loading:!1,error:!0,errMsg:e.toString()})}},{key:"render",value:function(){var e=this.state,t=e.jokes,r=e.favoriteJokes,n=e.loading,o=e.loadingFavorite,a=e.error,i=e.errMsg;return c.a.createElement("div",null,c.a.createElement(l.b,{user:u.a.getUser()}),c.a.createElement("section",{className:"container-fluid px-4 pt-4 mt-2"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6 col-sm-12 mb-4"},a&&c.a.createElement("div",{className:"alert alert-danger",role:"alert"},i),c.a.createElement("div",{className:"card"},c.a.createElement(l.c,{title:"Jokes (".concat(t.length,")"),btnCaption:"More fun",loader:n,items:t,onHeaderAction:this.loadJokes,onFavoriteClick:this.onFavoriteClick}))),c.a.createElement("div",{className:"col-md-6 col-sm-12 mb-4"},c.a.createElement("div",{className:"card"},c.a.createElement(l.c,{favorite:!0,title:"Favorite Jokes",items:r,loader:o,onFavoriteClick:this.onFavoriteClick,switchCaption:"Random",onSwitchToggle:this.onSwitchToggle}))))))}}])&&w(t.prototype,r),n&&w(t,n),o}();t.default=J}}]);